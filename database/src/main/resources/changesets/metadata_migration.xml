<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <!-- INDEX is a reserved keyword and HSQL doesn't support backtick escaping in queries so going with this for now.. -->
    <changeSet author="tjeandet" id="rename-index-to-idx">
        <renameColumn columnDataType="INT"
                      newColumnName="IDX"
                      oldColumnName="INDEX"
                      tableName="SYMBOL"/>
    </changeSet>
    <changeSet author="tjeandet" id="METADATA_MIGRATION">
        <comment>
            Metadata migration from 0.19 to 0.21.
        </comment>
        <customChange class="cromwell.database.migration.metadata.table.WorkflowExecutionTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.ExecutionTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.ExecutionInfoTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.ExecutionEventTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.FailureEventTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.RuntimeAttributesTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.InputSymbolTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.CallOutputSymbolTableMigration" />
        <customChange class="cromwell.database.migration.metadata.table.WorkflowOutputSymbolTableMigration" />
    </changeSet>

</databaseChangeLog>
